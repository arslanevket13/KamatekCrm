<Window x:Class="KamatekCrm.Views.QuickNewProductForPurchaseWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        mc:Ignorable="d"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Title="ðŸ“¦ HÄ±zlÄ± ÃœrÃ¼n OluÅŸtur"
        Height="580" Width="520"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F7FA">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolVis"/>

        <Style x:Key="Label" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#475569"/>
            <Setter Property="Margin" Value="0,10,0,3"/>
        </Style>

        <Style x:Key="Field" TargetType="TextBox">
            <Setter Property="Height" Value="34"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="9,5"/>
            <Setter Property="BorderBrush" Value="#CBD5E1"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#2563EB"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="ComboField" TargetType="ComboBox">
            <Setter Property="Height" Value="34"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="BorderBrush" Value="#CBD5E1"/>
            <Setter Property="Background" Value="White"/>
        </Style>
    </Window.Resources>

    <Border Margin="20" Background="White" CornerRadius="12">
        <Border.Effect>
            <DropShadowEffect BlurRadius="14" ShadowDepth="2" Opacity="0.08"/>
        </Border.Effect>

        <Grid Margin="22">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0">
                <TextBlock Text="Yeni ÃœrÃ¼n OluÅŸtur" FontSize="20" FontWeight="Bold" Foreground="#1E293B"/>
                <TextBlock Text="SipariÅŸe eklenecek Ã¼rÃ¼n bilgilerini girin." 
                           FontSize="11" Foreground="#94A3B8" Margin="0,3,0,0"/>
                <Separator Margin="0,12,0,0" Background="#E2E8F0"/>
            </StackPanel>

            <!-- Two-column form -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="14"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Left column -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="ÃœrÃ¼n AdÄ± *" Style="{StaticResource Label}"/>
                        <TextBox x:Name="ProductNameBox"
                                 Text="{Binding ProductName, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource Field}"/>

                        <TextBlock Text="SKU / Stok Kodu" Style="{StaticResource Label}"/>
                        <TextBox Text="{Binding SKU, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource Field}"/>

                        <TextBlock Text="Barkod" Style="{StaticResource Label}"/>
                        <TextBox Text="{Binding Barcode, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource Field}"/>

                        <TextBlock Text="Kategori" Style="{StaticResource Label}"/>
                        <ComboBox ItemsSource="{Binding Categories}"
                                  SelectedItem="{Binding SelectedCategory}"
                                  DisplayMemberPath="Name"
                                  Style="{StaticResource ComboField}"/>

                        <TextBlock Text="BaÅŸlangÄ±Ã§ Stok MiktarÄ±" Style="{StaticResource Label}"/>
                        <TextBox Text="{Binding InitialQuantity, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource Field}"/>
                    </StackPanel>

                    <!-- Right column -->
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Birim" Style="{StaticResource Label}"/>
                        <ComboBox ItemsSource="{Binding Units}"
                                  SelectedItem="{Binding Unit}"
                                  Style="{StaticResource ComboField}"/>

                        <TextBlock Text="KDV OranÄ± (%)" Style="{StaticResource Label}"/>
                        <ComboBox ItemsSource="{Binding VatRates}"
                                  SelectedItem="{Binding VatRate}"
                                  Style="{StaticResource ComboField}"/>

                        <TextBlock Text="AlÄ±ÅŸ FiyatÄ± (â‚º)" Style="{StaticResource Label}"/>
                        <TextBox Text="{Binding PurchasePrice, UpdateSourceTrigger=PropertyChanged, StringFormat='N2'}"
                                 Style="{StaticResource Field}"/>

                        <TextBlock Text="SatÄ±ÅŸ FiyatÄ± (â‚º)" Style="{StaticResource Label}"/>
                        <TextBox Text="{Binding SalePrice, UpdateSourceTrigger=PropertyChanged, StringFormat='N2'}"
                                 Style="{StaticResource Field}"/>

                        <!-- Info note -->
                        <Border Background="#EFF6FF" CornerRadius="6" Padding="10,8" Margin="0,14,0,0">
                            <TextBlock Text="ðŸ’¡ SKU boÅŸ bÄ±rakÄ±lÄ±rsa otomatik tanÄ±mlanÄ±r. SatÄ±ÅŸ fiyatÄ± boÅŸ bÄ±rakÄ±lÄ±rsa alÄ±ÅŸ Ã— 1.20 uygulanÄ±r."
                                       FontSize="11" Foreground="#3B82F6" TextWrapping="Wrap"/>
                        </Border>
                    </StackPanel>
                </Grid>
            </ScrollViewer>

            <!-- Footer -->
            <StackPanel Grid.Row="2" Margin="0,14,0,0">
                <!-- Error -->
                <Border Background="#FEF2F2" CornerRadius="6" Padding="10,8" Margin="0,0,0,10"
                        Visibility="{Binding HasError, Converter={StaticResource BoolVis}}">
                    <TextBlock Text="{Binding ErrorMessage}" Foreground="#DC2626" FontSize="12" TextWrapping="Wrap"/>
                </Border>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0" Content="Ä°ptal"
                            Command="{Binding CancelCommand}"
                            Height="38" FontSize="13"
                            Background="#F8FAFC" Foreground="#64748B"
                            BorderBrush="#CBD5E1" BorderThickness="1" Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="8">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Grid.Column="2"
                            Content="ðŸ“¦ OluÅŸtur &amp; Ekle"
                            Command="{Binding SaveProductCommand}"
                            IsDefault="True"
                            Height="38" FontSize="13" FontWeight="SemiBold"
                            Foreground="White" BorderThickness="0" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="#2563EB"/>
                                <Style.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Background" Value="#93C5FD"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#1D4ED8"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </StackPanel>
        </Grid>
    </Border>
</Window>
