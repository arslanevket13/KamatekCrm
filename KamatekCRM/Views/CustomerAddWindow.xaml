<Window x:Class="KamatekCrm.Views.CustomerAddWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:helpers="clr-namespace:KamatekCrm.Helpers"
        mc:Ignorable="d"
        Title="âž• Yeni MÃ¼ÅŸteri Ekle"
        Height="700" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F7FA">

    <Window.Resources>
        <helpers:EnumToVisibilityConverter x:Key="EnumToVisibilityConverter"/>
        <helpers:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolVis"/>

        <Style x:Key="FieldLabel" TargetType="Label">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#374151"/>
            <Setter Property="Padding" Value="0,8,0,4"/>
        </Style>

        <Style x:Key="FieldBox" TargetType="TextBox">
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
        </Style>

        <Style x:Key="ModernCombo" TargetType="ComboBox">
            <Setter Property="Height" Value="36"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
        </Style>
    </Window.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Border Margin="20" Background="White" CornerRadius="12">
            <Border.Effect>
                <DropShadowEffect BlurRadius="15" ShadowDepth="3" Opacity="0.1"/>
            </Border.Effect>

            <Grid Margin="24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <StackPanel Grid.Row="0" Margin="0,0,0,16">
                    <TextBlock Text="Yeni MÃ¼ÅŸteri Ekle" FontSize="22" FontWeight="Bold" Foreground="#1E293B"/>
                    <TextBlock Text="MÃ¼ÅŸteri bilgilerini girin" FontSize="12" Foreground="#8E9AAF" Margin="0,4,0,0"/>
                    <Separator Margin="0,14,0,16" Background="#E5E7EB"/>
                </StackPanel>

                <!-- MÃ¼ÅŸteri Tipi SeÃ§imi -->
                <StackPanel Grid.Row="1" Margin="0,0,0,16">
                    <TextBlock Text="MÃ¼ÅŸteri Tipi:" FontWeight="SemiBold" FontSize="14" Foreground="#374151" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal">
                        <RadioButton Content="ðŸ‘¤ Bireysel" 
                                     IsChecked="{Binding NewCustomerType, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Individual, Mode=TwoWay}"
                                     GroupName="NewCustomerType" 
                                     Margin="0,0,25,0" 
                                     FontSize="14"
                                     VerticalAlignment="Center"/>
                        <RadioButton Content="ðŸ¢ Kurumsal" 
                                     IsChecked="{Binding NewCustomerType, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Corporate, Mode=TwoWay}"
                                     GroupName="NewCustomerType" 
                                     FontSize="14"
                                     VerticalAlignment="Center"/>
                        <RadioButton Content="ðŸš¶ Perakende" 
                                     IsChecked="{Binding NewCustomerType, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=WalkIn, Mode=TwoWay}"
                                     GroupName="NewCustomerType" 
                                     FontSize="14"
                                     VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <!-- Bireysel MÃ¼ÅŸteri AlanlarÄ± -->
                <Border Grid.Row="2" 
                        Visibility="{Binding NewCustomerType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter=Individual}"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Bireysel MÃ¼ÅŸteri Bilgileri" FontWeight="SemiBold" Foreground="#1565C0" FontSize="14" Margin="0,0,0,10"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <Label Content="TC Kimlik No" Style="{StaticResource FieldLabel}"/>
                                <TextBox Text="{Binding NewTcKimlikNo, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource FieldBox}" 
                                         MaxLength="11"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Kurumsal MÃ¼ÅŸteri AlanlarÄ± -->
                <Border Grid.Row="2" 
                        Visibility="{Binding NewCustomerType, Converter={StaticResource EnumToVisibilityConverter}, ConverterParameter=Corporate}"
                        Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Kurumsal MÃ¼ÅŸteri Bilgileri" FontWeight="SemiBold" Foreground="#1565C0" FontSize="14" Margin="0,0,0,10"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="10"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Column="0" Grid.Row="0">
                                <Label Content="Åžirket ÃœnvanÄ±" Style="{StaticResource FieldLabel}"/>
                                <TextBox Text="{Binding NewCompanyName, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource FieldBox}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Grid.Row="0">
                                <Label Content="Vergi NumarasÄ±" Style="{StaticResource FieldLabel}"/>
                                <TextBox Text="{Binding NewTaxNumber, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource FieldBox}"/>
                            </StackPanel>

                            <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,0,0">
                                <Label Content="Vergi Dairesi" Style="{StaticResource FieldLabel}"/>
                                <TextBox Text="{Binding NewTaxOffice, UpdateSourceTrigger=PropertyChanged}" 
                                         Style="{StaticResource FieldBox}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Temel Bilgiler -->
                <Grid Grid.Row="3" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Column="0" Grid.Row="0">
                        <Label Content="Ad Soyad *" Style="{StaticResource FieldLabel}"/>
                        <TextBox Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FieldBox}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Grid.Row="0">
                        <Label Content="Telefon *" Style="{StaticResource FieldLabel}"/>
                        <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FieldBox}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,0,0">
                        <Label Content="E-posta" Style="{StaticResource FieldLabel}"/>
                        <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FieldBox}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" Grid.Row="1">
                        <Label Content="DoÄŸum Tarihi" Style="{StaticResource FieldLabel}"/>
                        <DatePicker SelectedDate="{Binding BirthDate}" Height="36" FontSize="13" Padding="8,6"/>
                    </StackPanel>
                </Grid>

                <!-- Adres Bilgileri -->
                <StackPanel Grid.Row="4" Margin="0,0,0,16">
                    <TextBlock Text="Adres Bilgileri" FontWeight="SemiBold" FontSize="14" Foreground="#374151" Margin="0,0,0,10"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Column="0" Grid.Row="0">
                            <Label Content="Åžehir" Style="{StaticResource FieldLabel}"/>
                            <ComboBox ItemsSource="{Binding Cities}" SelectedItem="{Binding SelectedCity}" 
                                      DisplayMemberPath="Name" Style="{StaticResource ModernCombo}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2" Grid.Row="0">
                            <Label Content="Ä°lÃ§e" Style="{StaticResource FieldLabel}"/>
                            <ComboBox ItemsSource="{Binding Districts}" SelectedItem="{Binding SelectedDistrict}" 
                                      DisplayMemberPath="Name" Style="{StaticResource ModernCombo}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="4" Grid.Row="0">
                            <Label Content="Mahalle" Style="{StaticResource FieldLabel}"/>
                            <ComboBox ItemsSource="{Binding Neighborhoods}" SelectedItem="{Binding SelectedNeighborhood}" 
                                      DisplayMemberPath="Name" Style="{StaticResource ModernCombo}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,0,0">
                            <Label Content="Sokak/Cadde" Style="{StaticResource FieldLabel}"/>
                            <TextBox Text="{Binding Street, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FieldBox}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2" Grid.Row="1">
                            <Label Content="Bina No" Style="{StaticResource FieldLabel}"/>
                            <TextBox Text="{Binding BuildingNo, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FieldBox}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="4" Grid.Row="1">
                            <Label Content="Daire No" Style="{StaticResource FieldLabel}"/>
                            <TextBox Text="{Binding ApartmentNo, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FieldBox}"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <!-- Hata mesajÄ± -->
                <Border Grid.Row="5" Background="#FEF2F2" CornerRadius="8" Padding="12,10" Margin="0,0,0,16"
                        Visibility="{Binding HasError, Converter={StaticResource BoolVis}}">
                    <TextBlock Text="{Binding ErrorMessage}" Foreground="#DC2626" FontSize="13" TextWrapping="Wrap"/>
                </Border>

                <!-- Footer Buttons -->
                <Grid Grid.Row="5" Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="12"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0"
                            Content="Ä°ptal"
                            Command="{Binding CancelCommand}"
                            Height="42" FontSize="14"
                            Background="#F3F4F6" Foreground="#4B5563"
                            BorderThickness="1" BorderBrush="#D1D5DB"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="8">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Grid.Column="2"
                            Content="Temizle"
                            Command="{Binding ClearFormCommand}"
                            Height="42" FontSize="14"
                            Background="#FEF3C7" Foreground="#92400E"
                            BorderThickness="1" BorderBrush="#FCD34D"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="8">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Grid.Column="4"
                            Content="ðŸ’¾ Kaydet"
                            Command="{Binding SaveCustomerCommand}"
                            IsDefault="True"
                            Height="42" FontSize="14" FontWeight="SemiBold"
                            Background="#10B981" Foreground="White"
                            BorderThickness="0"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter Property="Opacity" Value="0.5"/>
                                    </Trigger>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#059669"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Grid>
        </Border>
    </ScrollViewer>
</Window>
