<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<system.webServer>
		<rewrite>
			<rules>
				<rule name="ReverseProxyInboundRule1" stopProcessing="true">
					<match url="(.*)" />
					<action type="Rewrite" url="http://localhost:7000/{R:1}" />
				</rule>
			</rules>
		</rewrite>

		<httpProtocol>
			<customHeaders>
				<!-- Eski başlıkları temizle -->
				<remove name="Content-Security-Policy" />
				<remove name="X-Content-Security-Policy" />

				<!-- ═══════════════════════════════════════════════════════ -->
				<!-- STRICT CSP — unsafe-eval YOK                          -->
				<!-- Bootstrap 5 + HTMX CDN + Google Fonts                 -->
				<!-- ═══════════════════════════════════════════════════════ -->
				<add name="Content-Security-Policy"
				     value="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net; img-src 'self' data:; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self';" />

				<!-- Ek Güvenlik Başlıkları -->
				<add name="X-Content-Type-Options" value="nosniff" />
				<add name="X-Frame-Options" value="DENY" />
				<add name="Referrer-Policy" value="strict-origin-when-cross-origin" />
			</customHeaders>
		</httpProtocol>
	</system.webServer>
</configuration>